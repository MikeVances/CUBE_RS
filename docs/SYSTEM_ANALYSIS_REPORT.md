# üìä –û–¢–ß–Å–¢ –ü–û –ê–ù–ê–õ–ò–ó–£ –°–ò–°–¢–ï–ú–´ CUBE_RS

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 3 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ `a86a75c`

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–ù–ê–õ–ò–ó–ê

### ‚úÖ **–†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–¨ –°–ò–°–¢–ï–ú–´**
- **–°—Ç–∞—Ç—É—Å:** üü¢ –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–ê
- **–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** 3 –∞–∫—Ç–∏–≤–Ω—ã–µ –ë–î —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **–°–µ—Ä–≤–∏—Å—ã:** Web Application –¥–æ—Å—Ç—É–ø–µ–Ω, Gateway –∏ WebSocket —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—Å–∫–∞

### üì¶ **–ê–ù–ê–õ–ò–ó –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô**

#### –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚úÖ
- `pymodbus==3.5.1` - Modbus TCP/RTU –ø—Ä–æ—Ç–æ–∫–æ–ª
- `python-telegram-bot==20.8` - Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
- `Flask==2.3.3` - Web-—Å–µ—Ä–≤–µ—Ä
- `streamlit==1.35.0` - Dashboard –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `websockets==12.0` - Real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- `cryptography==44.0.0` - –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `PyYAML==6.0.1` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚úÖ
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã.

---

## ‚ö†Ô∏è **–û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
1. **–¢–µ—Å—Ç–æ–≤—ã–µ API –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ**
   - –ù–∞–π–¥–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ `tskey-api-xxxxxxxxxx` –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ
   - **–†–∏—Å–∫:** –ù–∞—Ä—É—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - **–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üü° –°—Ä–µ–¥–Ω–∏–µ  
2. **–®–∏—Ä–æ–∫–∏–µ Exception –±–ª–æ–∫–∏**
   - –ú–Ω–æ–≥–æ `except Exception as e:` –±–µ–∑ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - **–†–∏—Å–∫:** –ü–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—à–∏–±–æ–∫
   - **–†–µ—à–µ–Ω–∏–µ:** –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏**
   - –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `web_app/app.py` –∏ `telegram_bot/bot_main.py`
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### üü¢ –ú–∏–Ω–æ—Ä–Ω—ã–µ
4. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
   - –°–º–µ—à–∞–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
   - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ `ARCHITECTURE_REFACTOR.md`

---

## üóÇÔ∏è **–†–ï–°–¢–†–£–ö–¢–£–†–ò–ó–ê–¶–ò–Ø –ü–û –§–£–ù–ö–¶–ò–û–ù–ê–õ–£**

### ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
CUBE_RS/
‚îú‚îÄ‚îÄ apps/                    # üñ•Ô∏è –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
‚îÇ   ‚îú‚îÄ‚îÄ server/              # –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ client/              # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
‚îÇ   ‚îî‚îÄ‚îÄ gateway/             # Gateway –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ services/                # üõ†Ô∏è –ë–ò–ó–ù–ï–° –°–ï–†–í–ò–°–´
‚îú‚îÄ‚îÄ core/                    # ‚öôÔ∏è –Ø–î–†–û –°–ò–°–¢–ï–ú–´
‚îú‚îÄ‚îÄ infrastructure/          # üöÄ –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê
‚îî‚îÄ‚îÄ tests/                   # üß™ –¢–ï–°–¢–´
```

### üìÅ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**

#### SERVER APPS
- **Web Dashboard** ‚Üê `web_app/`
- **API Gateway** ‚Üê `web_app/api_gateway.py`  
- **Tunnel Broker** ‚Üê `tunnel_system/tunnel_broker.py`
- **Telegram Service** ‚Üê `telegram_bot/`

#### CLIENT APPS
- **Mobile App** ‚Üê `tunnel_system/mobile_app.py`
- **Farm Client** ‚Üê `tunnel_system/*_farm_client.py`
- **Discovery Client** ‚Üê `tunnel_system/tailscale_discovery_service.py`

#### GATEWAY APPS  
- **Modbus Gateway** ‚Üê `modbus/gateway.py`
- **Data Gateway** ‚Üê `publish/`

---

## üß™ **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

### ‚úÖ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
1. **–ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã** - `tests/unit/test_basic_functionality.py`
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** - `tests/integration/test_system_integration.py` 
3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã** - `tests/system_health_check.py`

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ –í—Å–µ –ë–î –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ Core –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üöÄ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò**

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
1. **–ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ API –∫–ª—é—á–∏** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É:** `python tools/start_all_services.py`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –≤ `config/logs/`

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)
4. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π** - –∑–∞–º–µ–Ω–∏—Ç—å —à–∏—Ä–æ–∫–∏–µ `except Exception`
5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** –Ω–∞ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
6. **–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** –≤ CI/CD

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)  
7. **–í–Ω–µ–¥—Ä–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
8. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã**
9. **–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API**

---

## üìà **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

### üéØ **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 8/10**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞
- ‚úÖ –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –ë–æ–≥–∞—Ç—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (Telegram, Tailscale, Web UI)

**–û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (API –∫–ª—é—á–∏)
- ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚ö†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

### üèÜ **–°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: 85%**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## üìû **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É:** `python tools/start_all_services.py`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** http://localhost:5000  
3. **–ò–∑—É—á–∏—Ç—å –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:** `ARCHITECTURE_REFACTOR.md`
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:** `python tests/system_health_check.py`

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ**