# CUBE_RS Web Application

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞–º–∏ –ö–£–ë-1063 —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π Tailscale mesh-—Å–µ—Ç—å—é –∏ —Ä–æ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –¥–æ—Å—Ç—É–ø–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
CUBE-1063 ‚îÄ‚îÄ‚ñ∫ Modbus Gateway ‚îÄ‚îÄ‚ñ∫ Web Dashboard
    ‚îÇ              ‚îÇ                   ‚îÇ
    ‚îÇ              ‚îÇ                   ‚îú‚îÄ Tailscale Management  
    ‚îÇ              ‚îÇ                   ‚îú‚îÄ Device Registry
    ‚îÇ              ‚îÇ                   ‚îî‚îÄ RBAC System
    ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚ñ∫ Tailscale ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         Mesh Network
```

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (`app.py`)
- Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º Bootstrap UI
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Modbus Gateway —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π API
- –î–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: Dashboard –ö–£–ë-1063 –∏ Tailscale Management

### 2. **Tailscale Integration** (`tailscale_integration.py`)  
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tailscale API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è mesh-—Å–µ—Ç—å—é
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 3. **Device Registry** (`device_registry.py`)
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (–∞–Ω–∞–ª–æ–≥ IXON)
- –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- –ü—Ä–æ—Ü–µ—Å—Å –æ–¥–æ–±—Ä–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### 4. **RBAC System** (`rbac_system.py`)
- –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º
- 5 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π –æ—Ç Read Only –¥–æ System Administrator  
- –ì—Ä—É–ø–ø—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ API Gateway –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ó–∞–ø—É—Å–∫ API Gateway –Ω–∞ –ø–æ—Ä—Ç—É 8000
python web_app/api_gateway.py
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É API Gateway –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

**–í–∞—Ä–∏–∞–Ω—Ç A: ngrok**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
ngrok http 8000
# –ü–æ–ª—É—á–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL —Ç–∏–ø–∞ https://abc123.ngrok.io
```

**–í–∞—Ä–∏–∞–Ω—Ç B: CloudFlare Tunnel**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ cloudflared –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
cloudflared tunnel --url http://localhost:8000
```

### –®–∞–≥ 3: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service –Ω–∞ Render**
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```env
GATEWAY_URL=https://your-ngrok-url.ngrok.io  # URL –≤–∞—à–µ–≥–æ API Gateway
API_KEY=dev-api-key                          # API –∫–ª—é—á (—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ api_gateway.py)
API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç_–∏–∑_–ª–æ–≥–æ–≤              # API —Å–µ–∫—Ä–µ—Ç –∏–∑ –ª–æ–≥–æ–≤
SECRET_KEY=—Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞_–¥–ª—è_flask       # Flask secret key
DEBUG=false
```

4. **Build Command:** `pip install -r requirements.txt`
5. **Start Command:** `gunicorn app:app --bind 0.0.0.0:$PORT --workers 2`

### –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `api_gateway.py` –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤—è—Ç—Å—è –∫–ª—é—á–∏:

```
üîë API Key: dev-api-key
üîê API Secret: 1a2b3c4d5e6f7g8h9i0j...
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∫–ª—é—á–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Render.

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **API Key**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- **HMAC Signature**: –ü–æ–¥–ø–∏—Å—å –∑–∞–ø—Ä–æ—Å–∞ —Å timestamp
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏**: –ó–∞—â–∏—Ç–∞ –æ—Ç replay-–∞—Ç–∞–∫ (5 –º–∏–Ω—É—Ç)

### –ü—Ä–∏–º–µ—Ä –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–∞
```python
timestamp = str(int(time.time()))
payload = ""  # –ü—É—Å—Ç–æ–π –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–æ–≤
message = f"{timestamp}{payload}"
signature = hmac.new(secret.encode(), message.encode(), hashlib.sha256).hexdigest()
```

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
```
X-API-Key: dev-api-key
X-Timestamp: 1693123456
X-Signature: abcdef1234567890...
Content-Type: application/json
```

## üåê API Endpoints

### –ö–£–ë-1063 Monitoring API

- `GET /api/status` - –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Gateway
- `GET /api/data/current` - –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –ö–£–ë-1063
- `GET /api/data/history?hours=6` - –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- `GET /api/data/statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### Tailscale Management API

- `GET /api/tailscale/status` - –°—Ç–∞—Ç—É—Å Tailscale mesh-—Å–µ—Ç–∏  
- `GET /api/tailscale/devices` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ tailnet
- `GET /api/tailscale/farms` - –°–ø–∏—Å–æ–∫ —Ñ–µ—Ä–º (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —Ç–µ–≥–æ–º farm)
- `GET /api/tailscale/devices/{id}` - –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `POST /api/tailscale/auth-key` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `POST /api/tailscale/connectivity/check` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ñ–µ—Ä–º–µ

### Device Registry API

- `POST /api/registry/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `GET /api/registry/devices` - –°–ø–∏—Å–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `GET /api/registry/requests` - –û–∂–∏–¥–∞—é—â–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å—ã
- `POST /api/registry/requests/{id}/approve` - –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `POST /api/registry/auth-key` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `POST /api/registry/devices/{id}/revoke` - –û—Ç–∑—ã–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `POST /api/registry/devices/{id}/heartbeat` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `GET /api/registry/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üé® –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
- **Responsive –¥–∏–∑–∞–π–Ω** —Å Bootstrap 5 –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ —Ñ–æ–Ω–∞–º–∏
- **–ñ–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏** —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –≤–ª–∞–∂–Ω–æ—Å—Ç–∏, CO‚ÇÇ, –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –Ω–∞ Chart.js
- **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–ú–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ Tailscale (`/tailscale`)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ mesh-—Å–µ—Ç—å—é** —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–¢–∞–±—ã –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ —Ñ–µ—Ä–º** —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- **Real-time —Å—Ç–∞—Ç—É—Å** —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å API reachability –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3 SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### 1. **kub_data.db** - –î–∞–Ω–Ω—ã–µ –ö–£–ë-1063
```sql
-- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –ø–æ–∫–∞–∑–∞–Ω–∏–π
kub_readings: timestamp, temp_inside, temp_target, humidity, co2, ventilation_level
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ  
kub_statistics: success_rate, total_readings, error_count
```

### 2. **device_registry.db** - –†–µ–µ—Å—Ç—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤  
```sql
-- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
registered_devices: device_id, hostname, tailscale_ip, status, device_type, metadata
-- –ö–ª—é—á–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
auth_keys: key_id, key_hash, created_time, expires_time, usage_count
-- –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é  
device_registration_requests: request_id, device_hostname, status
```

### 3. **rbac_system.db** - –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞
```sql  
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏
users: user_id, username, email, roles, device_groups
roles: role_id, name, permissions, is_system_role
-- –ì—Ä—É–ø–ø—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏
device_groups: group_id, name, device_ids, device_types, tags_filter  
access_policies: policy_id, device_group_id, role_id, permissions
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Gateway API
GATEWAY_URL=http://localhost:8000
API_KEY=your-gateway-api-key
API_SECRET=your-gateway-api-secret

# Tailscale –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TAILSCALE_ENABLED=true
TAILSCALE_TAILNET=your-tailnet.ts.net  
TAILSCALE_API_KEY=tskey-api-xxxxxxxxxx

# Flask –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SECRET_KEY=your-flask-secret-key
DEBUG=false
PORT=5000
```

## üöÄ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 2. –ó–∞–ø—É—Å–∫ Modbus Gateway (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python modbus/gateway.py

# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
export GATEWAY_URL=http://localhost:8000
export API_KEY=dev-api-key
export API_SECRET=your-secret-from-gateway-logs

# 4. –ó–∞–ø—É—Å–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
python app.py
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:5000`

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Gateway API
curl http://localhost:8000/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:5000/api/status  

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Tailscale —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:5000/api/tailscale/status
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏**: —É—Ä–æ–≤–µ–Ω—å INFO –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–§–∞–π–ª—ã –ª–æ–≥–æ–≤**: `config/logs/` –¥–ª—è Gateway, `tunnel_system/config/logs/` –¥–ª—è Tailscale
- **Debug —Ä–µ–∂–∏–º**: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `DEBUG=true` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **Connection refused**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—É—Å–∫ Modbus Gateway –Ω–∞ –ø–æ—Ä—Ç—É 8000
2. **Tailscale not configured**: –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `TAILSCALE_*` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **Database locks**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ SQLite
4. **CORS errors**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Flask-CORS

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Dashboard –ö–£–ë-1063 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- **–¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è**: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C), –≤–ª–∞–∂–Ω–æ—Å—Ç—å (%), CO‚ÇÇ (ppm), –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è (%)
- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏**: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —á–∞—Å–æ–≤
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º—ã**: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø—Ä–æ—Å–æ–≤, –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π
- **–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–≤—è–∑–∏ —Å Gateway

### Tailscale Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:  
- **–°—Ç–∞—Ç—É—Å mesh-—Å–µ—Ç–∏**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω
- **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤**: —Å Tailscale IP –∏ —Å—Ç–∞—Ç—É—Å–æ–º API
- **–§–µ—Ä–º—ã –ö–£–ë-1063**: —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —Ç–µ–≥–æ–º "farm"
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ auth keys –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
git pull origin main
pip install -r requirements.txt  
python app.py
```

### –î–ª—è production (Render/Docker):
1. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. Render/Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. Modbus Gateway –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ GATEWAY_URL