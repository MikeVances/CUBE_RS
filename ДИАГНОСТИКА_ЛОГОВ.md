# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –õ–û–ì–û–í –°–ò–°–¢–ï–ú–´ CUBE_RS

## üìã –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í –ù–ê –ü–†–ï–î–ú–ï–¢ –ü–û–î–í–ò–°–ê–ù–ò–Ø

### üü° **–û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´:**

---

## 1. ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê –° –ü–û–†–¢–û–ú 5023**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå –ü–æ—Ä—Ç 5023 —É–∂–µ –∑–∞–Ω—è—Ç!
```

**–ß–∞—Å—Ç–æ—Ç–∞:** –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å 30.08 –ø–æ 03.09

**–ü—Ä–∏—á–∏–Ω–∞:** Modbus TCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏–∑-–∑–∞ –∑–∞–Ω—è—Ç–æ–≥–æ –ø–æ—Ä—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π—Ç–∏ –∏ —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 5023
sudo lsof -ti:5023 | xargs kill -9

# –ò–ª–∏ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano config/app_config.yaml
# modbus_tcp:
#   port: 5024  # –ù–æ–≤—ã–π –ø–æ—Ä—Ç
```

---

## 2. üî¥ **TELEGRAM BOT –ü–û–°–¢–û–Ø–ù–ù–û –ü–ê–î–ê–ï–¢**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå Telegram Bot –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è (–∫–æ–¥: 1)
‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å Telegram Bot –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
```

**–ß–∞—Å—Ç–æ—Ç–∞:** –û—á–µ–Ω—å —á–∞—Å—Ç–æ - –∫–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç

**–û—Å–Ω–æ–≤–Ω–∞—è –æ—à–∏–±–∫–∞:**
```
ERROR - Conflict: terminated by other getUpdates request; 
make sure that only one bot instance is running
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ Telegram –±–æ—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞
pkill -f telegram_bot
pkill -f run_bot.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep telegram

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä
python telegram_bot/run_bot.py
```

---

## 3. üü† **DASHBOARD STREAMLIT –ü–ê–î–ê–ï–¢**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ùå Dashboard (Streamlit 8501) –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è (–∫–æ–¥: 0)
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–æ–º 8501

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç 8501
sudo lsof -ti:8501 | xargs kill -9

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dashboard
python dashboard/app.py
```

---

## 4. üîí **–ò–ó–ë–´–¢–û–ß–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –∏–∑ dev_password.txt - –ù–ï –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!
‚úÖ Master key –∑–∞–≥—Ä—É–∂–µ–Ω
```

**–ß–∞—Å—Ç–æ—Ç–∞:** –û—á–µ–Ω—å —á–∞—Å—Ç–æ - –∫–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç master key, —á—Ç–æ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞:
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –í–æ–∑–º–æ–∂–Ω—ã–µ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîß **–î–ò–ê–ì–ù–û–ó –ü–û–î–í–ò–°–ê–ù–ò–Ø GATEWAY:**

### **–ù–ï–¢ –ü–†–Ø–ú–´–• –ü–†–ò–ó–ù–ê–ö–û–í –ü–û–î–í–ò–°–ê–ù–ò–Ø**, –Ω–æ –µ—Å—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ —Ä–µ—Å—É—Ä—Å—ã:**
   - –ü–æ—Ä—Ç 5023 –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞–Ω—è—Ç
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã Telegram –±–æ—Ç–∞
   - –ß–∞—Å—Ç—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

2. **–ö–∞—Å–∫–∞–¥–Ω—ã–µ —Å–±–æ–∏:**
   - –ü–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥—Ä—É–≥–∏—Ö
   - –°–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –Ω–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ—à–∞—é—Ç

3. **–ò–∑–±—ã—Ç–æ—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:**
   - –ß–∞—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**

### **1. –û–°–¢–ê–ù–û–í–ò–¢–¨ –í–°–ï –°–ï–†–í–ò–°–´ –ò –û–ß–ò–°–¢–ò–¢–¨ –ü–†–û–¶–ï–°–°–´**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ CUBE_RS
python tools/kill_all.py

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pkill -f modbus
pkill -f telegram
pkill -f streamlit
pkill -f gateway

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —É–±–∏—Ç—ã
ps aux | grep -E "(modbus|telegram|streamlit|gateway|cube)"
```

### **2. –û–°–í–û–ë–û–î–ò–¢–¨ –í–°–ï –ü–û–†–¢–´**
```bash
# –û—Å–≤–æ–±–æ–¥–∏—Ç—å –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ—Ä—Ç—ã
sudo lsof -ti:5023 | xargs kill -9  # Modbus TCP
sudo lsof -ti:5000 | xargs kill -9  # Web App
sudo lsof -ti:8501 | xargs kill -9  # Dashboard
sudo lsof -ti:8000 | xargs kill -9  # Gateway
sudo lsof -ti:8765 | xargs kill -9  # WebSocket
```

### **3. –ò–°–ü–†–ê–í–ò–¢–¨ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Æ**
```bash
# –ü–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—Ç Modbus –µ—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç
nano config/app_config.yaml

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Telegram –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
nano config/secrets/bot_secrets.enc

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### **4. –ó–ê–ü–£–°–ö –ß–ï–†–ï–ó –û–î–ò–ù –°–ï–†–í–ò–°**
```bash
# –í–º–µ—Å—Ç–æ start_all_services.py –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É:

# 1. –°–Ω–∞—á–∞–ª–∞ Gateway
python modbus/gateway.py

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥

# 2. –ü–æ—Ç–æ–º Web App
python web_app/app.py

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥

# 3. –ü–æ—Ç–æ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏
```

---

## üìä **–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú:**

- **–û—à–∏–±–∫–∏ –ø–æ—Ä—Ç–∞ 5023:** ~10 —Ä–∞–∑
- **–ü–∞–¥–µ–Ω–∏—è Telegram Bot:** ~15+ —Ä–∞–∑  
- **–ü–∞–¥–µ–Ω–∏—è Dashboard:** ~3 —Ä–∞–∑–∞
- **–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ~200+ –∑–∞–ø–∏—Å–µ–π –≤ –¥–µ–Ω—å

## üéØ **–í–´–í–û–î:**

**Gateway –Ω–µ –ø–æ–¥–≤–∏—Å–∞–µ—Ç, –∞ —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç:**
1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Ä—Ç–æ–≤**
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** 
3. **–ö–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤**
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞**

**–†–µ—à–µ–Ω–∏–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø–æ—ç—Ç–∞–ø–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤.